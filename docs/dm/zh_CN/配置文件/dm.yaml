task-name: test
task-mode: all
meta-schema: dm_meta
remove-meta: false
disable-heartbeat: true
target-database:
  host: 192.168.0.1
  port: 4000
  user: root
  password: ""
mysql-instances:
  instance118-4306:
    config:
      host: 192.168.199.118
      port: 4306
      user: root
      password: "1234"
    instance-id: instance118-4306
    meta:
      binlog-name: binlog-00001
      binlog-pos: 4
    mydumper-config-name: global
    mydumper: null
    loader-config-name: global
    loader: null
    syncer-config-name: global
    syncer: null
  instance118-5306:
    config:
      host: 192.168.199.118
      port: 5306
      user: root
      password: "1234"
    instance-id: instance118-5306
    meta:
      binlog-name: binlog-00001
      binlog-pos: 320
    filter-rules:
    mydumper-config-name: ""
    mydumper:
      mydumper-path: ./mydumper
      threads: 4
      chunk-filesize: 8
      skip-tz-utc: true
      extra-args: ""
    loader-config-name: ""
    loader:
      pool-size: 32
      dir: ./dumped_data
    syncer-config-name: ""
    syncer:
      meta-file: ""
      worker-count: 32
      batch: 2000
      max-retry: 200
      disable-detect: false
      safe-mode: false
mydumpers:
  global:
    mydumper-path: ./mydumper
    threads: 16
    chunk-filesize: 64
    skip-tz-utc: true
    extra-args: "-B test -T t1,t2 --no-locks"
loaders:
  global:
    pool-size: 16
    dir: ./dumped_data
syncers:
  global:
    meta-file: ""
    worker-count: 16
    batch: 1000
    max-retry: 100
    disable-detect: false
    safe-mode: false
ignored-tables: {}
do-tables:
  instance118-4306:
    instance-id: instance118-4306
    tables:
      schema_1:
      - table_1
      - table_2
      schema_2:
      - table_1
      - table_2
  instance118-5306:
    instance-id: instance118-5306
    tables:
      do:
      - do
      schema_1:
      - table_1
      - table_2
      schema_2:
      - table_1
      - table_2
sharding-groups:
- schema: test
  table: t
  source-tables:
    instance118-4306:
      instance-id: instance118-4306
      column-mapping-rules:
      - schema-pattern: test_*
        table-pattern: t_*
        source-column: id
        target-column: id
        expression: "partition id"
        arguments:
        - "1"
        - schema_
        - table_
        create-table-query: ""
      tables:
        schema_1:
        - table_1
        - table_2
        schema_2:
        - table_1
        - table_2
    instance118-5306:
      instance-id: instance118-5306
      column-mapping-rules:
      - schema-pattern: test_*
        table-pattern: t_*
        source-column: id
        target-column: id
        expression: "partition id"
        arguments:
        - "2"
        - schema_
        - table_
        create-table-query: ""
      tables:
        schema_1:
        - table_1
        - table_2
        schema_2:
        - table_1
        - table_2
filter:
  instance118-4306:
    instance-id: instance118-4306
    tables:
      schema_1:
      - name: table_1
        ignored-binlog-events:
        - truncate table
        - drop table
      - name: table_2
        ignored-binlog-events:
        - truncate table
        - drop table
      schema_2:
      - name: table_1
        ignored-binlog-events:
        - truncate table
        - drop table
      - name: table_2
        ignored-binlog-events:
        - truncate table
        - drop table
